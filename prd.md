# Техническое задание  
## Мобильное CRM-приложение для продаж мягкой мебели

**Платформа:** Android  
**Технология:** Flutter (Dart)  
**Тип приложения:** Мобильная CRM с документооборотом, аналитикой и AI  
**Язык интерфейса и документов:** Русский  

---

## 1. Цель проекта

Разработка мобильного приложения для учета клиентов, управления продажами мягкой мебели, формирования коммерческих предложений и договоров в формате PDF, отслеживания статусов сделок и анализа финансового оборота за выбранный период.

Приложение должно упростить работу менеджера по продажам и дать владельцу бизнеса понимание текущих доходов.

---

## 2. Целевая аудитория

- Менеджеры по продажам мягкой мебели  
- Владельцы мебельных салонов  
- Индивидуальные предприниматели  

---

## 3. Основной функционал

---

### 3.1 CRM — Клиенты

Функционал работы с клиентами:

- Создание клиента:
  - ФИО
  - Телефон
  - Email
  - Адрес доставки
  - Комментарий
- Редактирование клиента
- Удаление клиента
- Просмотр списка клиентов
- Поиск и фильтрация
- История взаимодействий и сделок по клиенту

---

### 3.2 Товары и позиции сделки

- Добавление товара:
  - Наименование
  - Описание
  - Цена
  - Количество
  - Фото
- Общая сумма рассчитывается автоматически
- Поддержка нескольких товаров в одной сделке

---

### 3.3 Голосовой ввод и ChatGPT API

Интеграция с OpenAI API (ChatGPT):

- Голосовой ввод наименования товара
- Ручной ввод с AI-дополнением
- Возможности AI:
  - Генерация названия товара
  - Улучшение описания
  - Исправление орфографии
- Язык генерации: русский
- Ввод осуществляется прямо в форме добавления товара

---

### 3.4 Коммерческое предложение (КП)

- Формирование коммерческого предложения по шаблону
- Автозаполнение данных:
  - Клиент
  - Список товаров
  - Итоговая сумма
- Экспорт в PDF
- Сохранение PDF в карточке клиента
- Возможность повторного формирования КП

---

### 3.5 Договор

- Формирование договора на русском языке
- Данные договора:
  - ФИО клиента
  - Дата договора
  - Сумма
  - Сроки выполнения
- Заполнение переменных из данных сделки
- Экспорт в PDF
- Хранение договора в карточке клиента

---

### 3.6 Статусы сделки

Каждая сделка должна иметь один из следующих статусов:

- В работе  
- КП отправлено  
- Отказ  
- Оплата  
- Выполнено  

**Правило учета в аналитике:**  
Сделка считается успешной и учитывается в обороте, если ее статус установлен в:
- `Оплата`
- `Выполнено`

---

### 3.7 Google Calendar

- При смене статуса сделки на `Оплата`:
  - Автоматически создается событие в Google Calendar
  - Название события: доставка / дедлайн по договору
  - Дата берется из договора
- Возможность редактирования события

---

### 3.8 Аналитика и финансовый оборот

Приложение должно предоставлять аналитику по обороту в рублях.

#### Условия учета сделки в оборот:
- Статус сделки: `Оплата` или `Выполнено`
- Указана итоговая сумма сделки
- Указана дата оплаты

---

#### Показатели аналитики:

- Общий оборот за период (в рублях)
- Количество успешных продаж
- Средний чек
- Минимальная и максимальная сумма сделки

---

#### Периоды аналитики:

- Сегодня
- Неделя
- Месяц
- Произвольный период (выбор дат)

---

#### Визуализация:

- Карточки с ключевыми цифрами
- Линейный график оборота
- Столбчатая диаграмма по дням
- Список сделок, вошедших в расчет

---

#### Детализация сделки:

- Клиент
- Дата оплаты
- Сумма
- Номер договора
- Статус

---

## 4. Дополнительный функционал

### 4.1 Уведомления
- Напоминания о дедлайнах
- Push-уведомления

---

### 4.2 История изменений
- Лог смены статусов
- Дата и время изменений

---

### 4.3 Финансовое расширение (на будущее)
- Себестоимость товара
- Расчет прибыли
- Расчет маржи
- Экспорт аналитики в PDF / Excel

---

## 5. Хранение данных

- Локальное хранение:
  - SQLite
- PDF файлы хранятся локально
- В БД хранится путь к PDF

Для сделок необходимо хранить:
- Итоговую сумму
- Дату оплаты
- Флаг учета в обороте
- Статус сделки

---

## 6. Архитектура приложения

- Clean Architecture
- MVVM
- Разделение на слои:
  - UI
  - Domain
  - Data

---

## 7. UI / UX

- Material Design 3
- Светлая и темная тема
- Отдельные экраны:
  - Клиенты
  - Сделки
  - Документы
  - Аналитика
- Минимальное количество кликов
- Поддержка планшетов

---

## 8. Безопасность

- Secure Storage для API-ключей
- PIN-код / биометрия

---

## 9. Используемые библиотеки

- http / dio
- pdf / printing
- speech_to_text
- google_sign_in
- table_calendar
- OpenAI API (REST)
- charts_flutter или аналог

---

## 10. Результат разработки

- APK файл
- Исходный код Flutter
- Инструкция по сборке
- Документация по архитектуре
